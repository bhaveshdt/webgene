use webgene;

DROP TABLE webgene.USER;
DROP TABLE webgene.MEMBER;
DROP TABLE webgene.BORN_AT;
DROP TABLE webgene.DIED_AT; 
DROP TABLE webgene.CONTACT_AT;
DROP TABLE webgene.BIOFEATURES_AS;
DROP TABLE webgene.WORKED_FOR;
DROP TABLE webgene.WORK_TRAVEL_TO;
DROP TABLE webgene.WORK_TRAVEL_ITN;
DROP TABLE webgene.EDUCATED_AT;
DROP TABLE webgene.MEDICAL;
DROP TABLE webgene.RELIGIOUS_AT;
DROP TABLE webgene.MARITAL_EVENT_AT;
DROP TABLE webgene.RESIDED_AT;
DROP TABLE webgene.TRAVELED_TO;
DROP TABLE webgene.TRAVEL_ITN;

CREATE TABLE webgene.USER(
	ID INT UNSIGNED NOT NULL,
	USER_NAME CHAR(20) NOT NULL,
	PASSWORD CHAR(20) NOT NULL,
	PRIMARY KEY (ID)
) TYPE=INNODB;

CREATE TABLE webgene.MEMBER(
	MEMBER_ID INT UNSIGNED NOT NULL,
	FIRSTNAME CHAR(25) NOT NULL,
	MIDDLENAME CHAR(25) NOT NULL,
	LASTNAME CHAR(25) NOT NULL,
	MAIDEN_NAME CHAR(25) NULL,
	MOTHER_ID INT UNSIGNED NOT NULL,
	FATHER_ID INT UNSIGNED NOT NULL,
	MARITAL_STATUS ENUM('SINGLE', 'MARRIED', 'SEPARATED', 'DIVORCED') NOT NULL,
	OCCUPATION CHAR(20) NOT NULL,
	MEMBER_SINCE TIMESTAMP NOT NULL,
	PRIMARY KEY (MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.BORN_AT (
	MEMBER_ID INT UNSIGNED NOT NULL,
	BIRTH_DATE DATETIME NOT NULL,
	DELIVERY_DOCTOR CHAR(100) NULL,
	INSTITUTION_NAME CHAR(50) NULL,
	INSTITUTION_STREET CHAR(50) NULL,
	INSTITUTION_CITY CHAR(30) NULL,
	INSTITUTION_STATE CHAR(30) NULL,
	INSTITUTION_ZIP CHAR(20) NULL,
	INSTITUTION_COUNTRY CHAR(30) NULL,
	INSTITUTION_PHONE CHAR(20) NULL,
	INSTITUTION_FAX CHAR(20) NULL,
	INSTITUTION_EMAIL CHAR(50) NULL,
	INSTITUTION_WEBSITE CHAR(50) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.DIED_AT (
	MEMBER_ID INT UNSIGNED NOT NULL,
	DEATH_DATE DATETIME NULL,
	INSTITUTION_NAME CHAR(50) NULL,
	INSTITUTION_STREET CHAR(50) NULL,
	INSTITUTION_CITY CHAR(30) NULL,
	INSTITUTION_STATE CHAR(30) NULL,
	INSTITUTION_ZIP CHAR(20) NULL,
	INSTITUTION_PHONE CHAR(20) NULL,
	INSTITUTION_FAX CHAR(20) NULL,
	INSTITUTION_EMAIL CHAR(50) NULL,
	INSTITUTION_WEBSITE CHAR(50) NULL,
	CEREMONY_BY CHAR(100) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.CONTACT_AT (
	MEMBER_ID INT UNSIGNED NOT NULL,
	EMAIL CHAR(30) NOT NULL,
	IM_ID CHAR(30) NULL,
	HOME_PHONE CHAR(20) NULL,
	WORK_PHONE CHAR(20) NULL,
	MOBILE_PHONE CHAR(20) NULL,
	FAX CHAR(20) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,	
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.BIOFEATURES_AS (
	MEMBER_ID INT UNSIGNED NOT NULL,
	GENDER ENUM('M', 'F') NOT NULL,
	HEIGHT INT UNSIGNED NOT NULL,
	WEIGHT INT UNSIGNED NOT NULL,
	COMPLEXION CHAR(20) NULL,
	EYE_COLOR CHAR(20) NULL,
	HAIR_COLOR CHAR(20) NULL,
	HANDEDNESS CHAR(20) NULL,
	ADDITIONAL_ATTRIBUTES CHAR(50) NULL,
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.WORKED_FOR (
	MEMBER_ID INT UNSIGNED NOT NULL,
	ORGANIZATION_ID INT UNSIGNED NOT NULL,
	FROM_DATE DATETIME NULL,
	TO_DATE DATETIME NULL,
	TIME_ZONE CHAR(50) NOT NULL,
	WORK_PHONE CHAR(20) NULL,
	WORK_FAX CHAR(20) NULL,	
	DEPARTMENT_NAME CHAR(50) NULL,
	SUPERVISOR_NAME CHAR(50) NULL,
	POSITION_NAME CHAR(50) NULL,
	RESPONSIBILITIES CHAR(50) NULL,
	REASON_FOR_MOVE CHAR(50) NULL,
	ORGANIZATION_NAME CHAR(50) NULL,
	ORGANIZATION_STREET CHAR(50) NULL,
	ORGANIZATION_CITY CHAR(30) NULL,
	ORGANIZATION_STATE CHAR(30) NULL,
	ORGANIZATION_ZIP CHAR(20) NULL,
	ORGANIZATION_COUNTRY CHAR(30) NULL,
	ORGANIZATION_PHONE CHAR(20) NULL,
	ORGANIZATION_FAX CHAR(20) NULL,
	ORGANIZATION_EMAIL CHAR(50) NULL,
	ORGANIZATION_WEBSITE CHAR(50) NULL,
	ORGANIZATION_DESCR CHAR(255) NULL,
	PRIMARY KEY(MEMBER_ID, ORGANIZATION_ID),
	INDEX(MEMBER_ID, ORGANIZATION_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.WORK_TRAVEL_TO (
	MEMBER_ID INT UNSIGNED NOT NULL,
	ORGANIZATION_ID INT UNSIGNED NOT NULL,
	TRAVEL_ID INT UNSIGNED NOT NULL,
	FROM_DATE DATETIME NULL,
	TO_DATE DATETIME NULL,
	TIME_ZONE CHAR(50) NOT NULL,
	TRIP_NAME CHAR(50) NULL,
	AGENCY_STREET CHAR(50) NULL,
	AGENCY_CITY CHAR(30) NULL,
	AGENCY_STATE CHAR(30) NULL,
	AGENCY_ZIP CHAR(20) NULL,
	AGENCY_COUNTRY CHAR(30) NULL,
	AGENCY_PHONE CHAR(50) NULL,
	AGENCY_FAX CHAR(50) NULL,
	AGENCY_EMAIL_ADDRESS CHAR(50) NULL,
	AGENCY_WEBSITE CHAR(50) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	PRIMARY KEY (MEMBER_ID, ORGANIZATION_ID, TRAVEL_ID),
	INDEX(MEMBER_ID, ORGANIZATION_ID),
	FOREIGN KEY (MEMBER_ID, ORGANIZATION_ID) REFERENCES WORKED_FOR(MEMBER_ID, ORGANIZATION_ID)
		ON UPDATE CASCADE ON DELETE CASCADE,
) TYPE=INNODB;

CREATE TABLE webgene.WORK_TRAVEL_ITN (
	MEMBER_ID INT UNSIGNED NOT NULL,
	ORGANIZATION_ID INT UNSIGNED NOT NULL,
	TRAVEL_ID INT UNSIGNED NOT NULL,
	TRAVEL_ITN_ID INT UNSIGNED NOT NULL,
	FROM_DATE DATETIME NULL,
	TO_DATE DATETIME NULL,
	TIME_ZONE CHAR(50) NOT NULL,
	DESTINATION_NAME CHAR(50) NULL,
	TRANSPORTATION_NAME CHAR(20) NULL,
	TRANSPORTATION_DESCR CHAR(50) NULL,
	T_STREET CHAR(50) NULL,
	T_CITY CHAR(30) NULL,
	T_STATE CHAR(30) NULL,
	T_ZIP CHAR(20) NULL,
	T_COUNTRY CHAR(30) NULL,
	T_PHONE CHAR(50) NULL,
	T_FAX CHAR(50) NULL,
	T_EMAIL_ADDRESS CHAR(50) NULL,
	T_WEBSITE CHAR(50) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	PRIMARY KEY (TRAVEL_ID, TRAVEL_ITN_ID),
	INDEX(MEMBER_ID, ORGANIZATION_ID, TRAVEL_ID),
	FOREIGN KEY (MEMBER_ID, ORGANIZATION_ID, TRAVEL_ID) REFERENCES 
		WORK_TRAVEL_TO(MEMBER_ID, ORGANIZATION_ID, TRAVEL_ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.EDUCATED_AT (
	MEMBER_ID INT UNSIGNED NOT NULL,
	FROM_DATE DATETIME NULL,
	TO_DATE DATETIME NULL,
	TIME_ZONE CHAR(50) NOT NULL,
	INSTITUTION_TYPE CHAR(50) NULL,
	INSTITUTION_NAME CHAR(50) NULL,
	INSTITUTION_STREET CHAR(50) NULL,
	INSTITUTION_CITY CHAR(30) NULL,
	INSTITUTION_STATE CHAR(30) NULL,
	INSTITUTION_ZIP CHAR(20) NULL,
	INSTITUTION_COUNTRY CHAR(30) NULL,
	INSTITUTION_PHONE CHAR(20) NULL,
	INSTITUTION_FAX CHAR(20) NULL,
	INSTITUTION_EMAIL CHAR(50) NULL,
	INSTITUTION_WEBSITE CHAR(50) NULL,
	GRADUATION_DATE DATETIME NULL,
	DEGREE_RECEIVED CHAR(50) NULL,
	DEGREE_MAJOR CHAR(50) NULL,
	CONCENTRATION_1 CHAR(50) NULL,
	DEGREE_MINOR CHAR(50) NULL,
	SECOND_MAJOR CHAR(50) NULL,
	CONCENTRATION_2 CHAR(50) NULL,
	ACADEMIC_STANDING CHAR(50) NULL,
	CLUBS CHAR(50) NULL,
	ATHELETICS CHAR(50) NULL,
	TEAMS CHAR(50) NULL,
	AWARDS CHAR(50) NULL,
	HONORS CHAR(50) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.MEDICAL (
	MEMBER_ID INT UNSIGNED NOT NULL,
	- ailments
	- blood group
	- allergies
	- ???????
	- additional_notes
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.RELIGIOUS_AT (
	MEMBER_ID INT UNSIGNED NOT NULL,
	FROM_DATE DATETIME NULL,
	TO_DATE DATETIME NULL,
	TIME_ZONE CHAR(50) NOT NULL,
	ORGANIZATION_STREET CHAR(50) NULL,
	ORGANIZATION_CITY CHAR(30) NULL,
	ORGANIZATION_STATE CHAR(30) NULL,
	ORGANIZATION_ZIP CHAR(20) NULL,
	ORGANIZATION_COUNTRY CHAR(30) NULL,
	ORGANIZATION_DESCR CHAR(255) NULL,	
	ORGANIZATION_PHONE CHAR(20) NULL,
	ORGANIZATION_FAX CHAR(20) NULL,
	ORGANIZATION_EMAIL CHAR(50) NULL,
	ORGANIZATION_WEBSITE CHAR(50) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.MARITAL_EVENT_AT (
	MEMBER_ID INT UNSIGNED NOT NULL,
	EVENT_DATE DATETIME NULL,
	TIME_ZONE CHAR(50) NOT NULL,
	EVENT_NAME CHAR(20) NULL,
	SPOUSE_NAME CHAR(50) NULL,
	ORGANIZATION_NAME CHAR(50) NULL,
	ORGANIZATION_STREET CHAR(50) NULL,
	ORGANIZATION_CITY CHAR(30) NULL,
	ORGANIZATION_STATE CHAR(30) NULL,
	ORGANIZATION_ZIP CHAR(20) NULL,
	ORGANIZATION_COUNTRY CHAR(30) NULL,
	ORGANIZATION_DESCR CHAR(255) NULL,
	EVENT_PERFORMED_BY CHAR(100) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.RESIDED_AT (
	MEMBER_ID INT UNSIGNED NOT NULL,
	FROM_DATE DATETIME NULL,
	TO_DATE DATETIME NULL,
	TIME_ZONE CHAR(50) NOT NULL,
	RESIDENCE_TYPE CHAR(50) NULL,
	RESIDENCE_NAME CHAR(50) NULL,
	RESIDENCE_STREET CHAR(50) NULL,
	RESIDENCE_CITY CHAR(30) NULL,
	RESIDENCE_STATE CHAR(30) NULL,
	RESIDENCE_ZIP CHAR(20) NULL,
	RESIDENCE_COUNTRY CHAR(30) NULL,
	RESIDENCE_PHONE CHAR(50) NULL,
	REASON_FOR_MOVE CHAR(50) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;

CREATE TABLE webgene.TRAVELED_TO (
	MEMBER_ID INT UNSIGNED NOT NULL,
	TRAVEL_ID INT UNSIGNED NOT NULL,
	FROM_DATE DATETIME NULL,
	TO_DATE DATETIME NULL,
	TIME_ZONE CHAR(50) NOT NULL,
	TRAVEL_NAME CHAR(50) NULL,
	TRAVEL_TYPE CHAR(20) NULL,
	AGENCY_STREET CHAR(50) NULL,
	AGENCY_CITY CHAR(30) NULL,
	AGENCY_STATE CHAR(30) NULL,
	AGENCY_ZIP CHAR(20) NULL,
	AGENCY_COUNTRY CHAR(30) NULL,
	AGENCY_PHONE CHAR(50) NULL,
	AGENCY_FAX CHAR(50) NULL,
	AGENCY_EMAIL_ADDRESS CHAR(50) NULL,
	AGENCY_WEBSITE CHAR(50) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	PRIMARY KEY (MEMBER_ID, TRAVEL_ID),
	INDEX(MEMBER_ID),
	FOREIGN KEY (MEMBER_ID) REFERENCES webgene.USER(ID)
		ON UPDATE CASCADE ON DELETE CASCADE,
) TYPE=INNODB;

CREATE TABLE webgene.TRAVEL_ITN (
	MEMBER_ID INT UNSIGNED NOT NULL,
	TRAVEL_ID INT UNSIGNED NOT NULL,
	TRAVEL_ITN_ID INT UNSIGNED NOT NULL,
	FROM_DATE DATETIME NULL,
	TO_DATE DATETIME NULL,
	TIME_ZONE CHAR(50) NOT NULL,
	DESTINATION_NAME CHAR(50) NULL,
	TRANSPORTATION_NAME CHAR(20) NULL,
	TRANSPORTATION_DESCR CHAR(50) NULL,
	T_STREET CHAR(50) NULL,
	T_CITY CHAR(30) NULL,
	T_STATE CHAR(30) NULL,
	T_ZIP CHAR(20) NULL,
	T_COUNTRY CHAR(30) NULL,
	T_PHONE CHAR(50) NULL,
	T_FAX CHAR(50) NULL,
	T_EMAIL_ADDRESS CHAR(50) NULL,
	T_WEBSITE CHAR(50) NULL,
	ADDITIONAL_NOTES CHAR(50) NULL,
	PRIMARY KEY (TRAVEL_ID, TRAVEL_ITN_ID),
	INDEX(MEMBER_ID, TRAVEL_ID),
	FOREIGN KEY (MEMBER_ID, TRAVEL_ID) REFERENCES TRAVELED_TO(MEMBER_ID, TRAVEL_ID)
		ON UPDATE CASCADE ON DELETE CASCADE
) TYPE=INNODB;
